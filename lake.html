
<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>The Lake Programming Language</title>
	<meta name="description" content="Declarative programming language designed for components.">
	<meta name="author" content="Rotem Dan">

	<!-- Favicon is courstey of freepik.com -->
	<link rel="shortcut icon" href="icons/oasis-32x32.png" />
	<link rel="stylesheet" href="styles/main.css">
</head>

<body>
<main id="main-content">
<h1 id="top-heading">The Lake Programming Language</h1>
<h2 id="top-subheading-2">(Work In Progress)</h2>
<p><strong>Lake</strong> (backronym: <strong>La</strong>nguage for <strong>k</strong>ompon<strong>e</strong>nts) is a declarative programming language designed as a component language suitable for a wide variety of application domains.</p>
<p>Lake was designed to ensure <strong>approachability</strong> for non-professional programmers and people in other fields, like designers, artists, and scientists. Programs are built via compositions of concrete, rather than abstract, building blocks. There are no complex inheritance hierarchies or polymorphic relationships. Instead, computations are carried out mainly by constructing cascades of dependent objects, or sequences of such objects, and then extracting the needed data by simply naming and exposing it.</p>
<p>Informally, a Lake program produces a <strong>domain-specific object model</strong> (a more general form of the Document Object Model used in web development), that by itself, is not a real &quot;program&quot; and does not produce any effects.</p>
<p>This event-driven, DOM-like, set of dynamic objects, is then interpreted by the host to produce a working program by binding and materializing its objects, states, and events to actual outputs and behaviors of the host, like UI elements, shapes drawn on a canvas, letters written on the screen, etc.</p>
<p>Every Lake source file represents a single component consisting of a set of named variables. A component's state is specified by a set of one or more free variables, called <em>inputs</em>. All of its other variables are either dependent or constant.</p>
<p>From the perspective of the host, a Lake component is seen as a <strong>JSON-like</strong> object model. The component's internal computations are performed behind the scenes, transparently, and updated lazily, when needed.</p>
<p>Lake is a <strong>reactive</strong> language. A change to a variable is propagated to all its dependencies and may cause them to be recomputed. The host may subscribe to notifications for some, or all, modification events.</p>
<p>Lake supports <strong>interaction modeling</strong> via events and actions. Actions may alter input values in response to events, or trigger secondary events. Events and actions can also be set to initiate whenever a particular set of preconditions are met within the component, using a special language feature called a <em>responsive observer</em>.</p>
<p>Every Lake component, as well as each of its variables, may embed <strong>native metadata</strong> properties. Metadata can be used to integrate components as interactable elements within a visual design environment.</p>
<p>More advanced features include functions, templates, mixins, sequence generators, programmable units of measure, custom types, and more.</p>
<nav class="table-of-contents"><ol><li><a href="#language-design">Language design</a><ol><li><a href="#principles-and-constraints">Principles and constraints</a></li><li><a href="#programming-paradigm">Programming paradigm</a></li><li><a href="#intended-applications">Intended applications</a></li></ol></li><li><a href="#introductory-guide">Introductory guide</a><ol><li><a href="#illustrative-code-example">Illustrative code example</a></li><li><a href="#every-source-file-is-a-single-component">Every source file is a single component</a></li><li><a href="#a-source-file-is-composed-of-a-set-of-declarations">A source file is composed of a set of declarations</a></li><li><a href="#inputs-are-free-variables-that-are-used-to-customize-and-control-the-component">Inputs are free variables that are used to customize and control the component</a></li><li><a href="#properties-are-dependent-variables-that-can-be-computed-using-other-variables">Properties are dependent variables that can be computed using other variables</a></li><li><a href="#property-expressions-may-include-conditionals">Property expressions may include conditionals</a></li><li><a href="#prototype-references-allow-objects-to-build-on-top-of-other-objects">Prototype references allow objects to build on top of other objects</a><ol><li><a href="#objects-deriving-from-a-prototype-may-be-anonymous">Objects deriving from a prototype may be anonymous</a></li></ol></li><li><a href="#templates-are-objects-with-unset-properties%2C-which-can-only-be-used-as-prototypes">Templates are objects with unset properties, which can only be used as prototypes</a><ol><li><a href="#templates-may-accept-arguments%3A">Templates may accept arguments:</a></li></ol></li><li><a href="#functions-perform-computations-based-on-a-set-of-arguments">Functions perform computations based on a set of arguments</a><ol><li><a href="#function-parameters-may-be-optional-and-have-default-values">Function parameters may be optional and have default values</a></li><li><a href="#function-arguments-can-be-named">Function arguments can be named</a></li><li><a href="#functions-can-recursively-call-themselves">Functions can recursively call themselves</a></li></ol></li><li><a href="#formulas-are-similar-to-functions%2C-but-also-allow-references-to-outer-variables">Formulas are similar to functions, but also allow references to outer variables</a></li><li><a href="#mixins-help-reduce-code-redundancy">Mixins help reduce code redundancy</a><ol><li><a href="#mixins-may-accept-arguments">Mixins may accept arguments</a></li></ol></li><li><a href="#events-and-actions-model-interaction-and-state-changes">Events and actions model interaction and state changes</a><ol><li><a href="#actions-may-trigger-secondary-events">Actions may trigger secondary events</a></li><li><a href="#top-level-handlers-can-listen-to-the-component's-own-events">Top-level handlers can listen to the component&#39;s own events</a></li><li><a href="#actions-can-be-declared-as-reusable-methods">Actions can be declared as reusable methods</a></li><li><a href="#event-handlers-may-include-preconditions">Event handlers may include preconditions</a></li></ol></li><li><a href="#responsive-observers-automatically-initiate-actions-when-a-precondition-is-met">Responsive observers automatically initiate actions when a precondition is met</a><ol><li><a href="#responsive-observers-can-also-be-declared-locally%2C-inside-object-blocks">Responsive observers can also be declared locally, inside object blocks</a></li><li><a href="#be-careful%3A-responsive-observers-may-produce-feedback-loops">Be careful: responsive observers may produce feedback loops</a></li></ol></li><li><a href="#time-based-interpolation-of-inputs">Time-based interpolation of inputs</a><ol><li><a href="#running-several-transitions-in-sequence">Running several transitions in sequence</a></li><li><a href="#launching-a-complex-combination-of-sequential-and-parallel-transitions">Launching a complex combination of sequential and parallel transitions</a></li><li><a href="#using-a-custom-interpolation-function">Using a custom interpolation function</a></li><li><a href="#update-rate">Update rate</a></li></ol></li><li><a href="#locals-help-to-represent-intermediate-computations">Locals help to represent intermediate computations</a><ol><li><a href="#properties-can-be-local">Properties can be local</a></li><li><a href="#functions-and-formulas-can-be-local">Functions and formulas can be local</a></li><li><a href="#templates-can-be-local">Templates can be local</a></li><li><a href="#mixins-can-be-local">Mixins can be local</a></li><li><a href="#action-methods-can-be-local">Action methods can be local</a></li><li><a href="#type-aliases-can-be-local">Type aliases can be local</a></li></ol></li><li><a href="#sequences">Sequences</a><ol><li><a href="#sequence-elements-may-be-typed-with-a-prototype">Sequence elements may be typed with a prototype</a></li><li><a href="#sequence-indices-can-receive-custom-ranges">Sequence indices can receive custom ranges</a></li><li><a href="#sequences-can-be-generated-by-iterating-over-other-sequences">Sequences can be generated by iterating over other sequences</a></li><li><a href="#foreach-in-iteration-may-filter-elements">foreach-in iteration may filter elements</a></li><li><a href="#foreach-in-may-be-applied-to-multiple-sequences-simultaneously">foreach-in may be applied to multiple sequences simultaneously</a></li><li><a href="#foreach-in-may-be-nested">foreach-in may be nested</a></li><li><a href="#when-only-filtering-is-desired%2C-use-select-all">When only filtering is desired, use select all</a></li><li><a href="#to-retrieve-only-the-first-match%2C-use-select-first">To retrieve only the first match, use select first</a></li></ol></li><li><a href="#sequences-can-be-generated-algorithmically">Sequences can be generated algorithmically</a><ol><li><a href="#computed-sequences-may-be-infinite">Computed sequences may be infinite</a></li><li><a href="#computed-sequences-may-be-defined-by-induction">Computed sequences may be defined by induction</a></li><li><a href="#an-inductive-sequence-can-help-to-implement-an-accumulator-function">An inductive sequence can help to implement an accumulator function</a></li><li><a href="#inductive-sequences-cannot-be-emulated-using-foreach-in">Inductive sequences cannot be emulated using foreach-in</a></li><li><a href="#inductive-sequence-%E2%89%A0-recursion">Inductive sequence ≠ recursion</a></li></ol></li><li><a href="#ranges-are-sequences%2C-too">Ranges are sequences, too</a></li><li><a href="#boolean-typed-properties-and-functions-describe-the-truth-values-of-expressions">Boolean-typed properties and functions describe the truth-values of expressions</a><ol><li><a href="#a-single-parameter-boolean-typed-function-can-also-be-evaluated-with-the-is-operator">A single parameter boolean typed function can also be evaluated with the is operator</a></li><li><a href="#forall-in-evaluates-a-boolean-expression-over-each-element-of-a-sequence">forall-in evaluates a Boolean expression over each element of a sequence</a></li><li><a href="#like-foreach%2C-forall-may-also-include-a-where-clause">Like foreach, forall may also include a where clause</a></li><li><a href="#forall-can-be-applied-over-the-elements-of-multiple-sequences">forall can be applied over the elements of multiple sequences</a></li><li><a href="#forall-can-be-applied-over-each-index-of-a-sequence">forall can be applied over each index of a sequence</a></li><li><a href="#exists-tests-the-existence-of-at-least-one-match">exists tests the existence of at least one match</a></li></ol></li></ol></li><li><a href="#type-system">Type system</a><ol><li><a href="#built-in-types">Built-in types</a></li><li><a href="#objects">Objects</a><ol><li><a href="#updating-object-properties">Updating object properties</a></li><li><a href="#creating-modified-versions-of-existing-objects">Creating modified versions of existing objects</a></li></ol></li><li><a href="#tuples">Tuples</a></li><li><a href="#dictionaries">Dictionaries</a></li><li><a href="#sets">Sets</a></li><li><a href="#range-types">Range types</a></li><li><a href="#choice-types">Choice types</a></li><li><a href="#type-aliases">Type aliases</a></li><li><a href="#variants">Variants</a></li><li><a href="#generics">Generics</a></li></ol></li><li><a href="#imports-and-javascript-interoperation">Imports and JavaScript interoperation</a><ol><li><a href="#importing-components">Importing components</a></li><li><a href="#importing-functions-from-javascript-modules">Importing functions from JavaScript modules</a></li></ol></li><li><a href="#units-of-measure">Units of measure</a><ol><li><a href="#units-with-special-characters">Units with special characters</a></li><li><a href="#sharing-units-between-components">Sharing units between components</a></li></ol></li><li><a href="#metadata">Metadata</a></li><li><a href="#random-number-generation">Random number generation</a></li><li><a href="#regular-expressions">Regular expressions</a></li><li><a href="#closing-chapter">Closing chapter</a><ol><li><a href="#open-design-topics">Open design topics</a></li><li><a href="#todo">TODO</a></li><li><a href="#issues">Issues</a></li><li><a href="#influences">Influences</a></li><li><a href="#feedback-for-this-document">Feedback for this document</a></li><li><a href="#copyrights">Copyrights</a></li></ol></li></ol></nav><section>
<h1 id="language-design">Language design <a class="header-anchor" href="#language-design">§</a></h1>
<section>
<h2 id="principles-and-constraints">Principles and constraints <a class="header-anchor" href="#principles-and-constraints">§</a></h2>
<ul>
<li><strong>Static typing</strong>: all data types are resolved at compile-time.</li>
<li><strong>Non-nullability</strong>: all placeholders are guaranteed to receive a value. It is not possible to have a value that is 'null' or 'undefined' unless it was explicitly enabled in its type definition.</li>
<li><strong>Independence</strong>: each component is self-contained and fully described by its inputs.</li>
<li><strong>Determinism</strong>: given the same input set, a component will always evaluate to the same exact set of properties (<em>pseudo-randomness is supported via specialized syntax, requiring explicit seed values to be set</em>).</li>
<li><strong>No external side effects</strong>: a component does not induce external effects or indirectly interact with the system in any way.</li>
<li><strong>Lazy evaluation</strong>: values are (re)computed only when needed. Computed values may be cached and subsequently reused to speed-up future evaluations of similar or related values.</li>
<li><strong>Order insensitivity</strong>: the meaning of a program does not depend on the order of statements.</li>
<li><strong>No hidden state</strong>: no aspect of a component's state is hidden.</li>
<li><strong>No hidden state changes</strong>: state changes must be a direct result of alterations to one or more inputs.</li>
</ul>
</section>
<section>
<h2 id="programming-paradigm">Programming paradigm <a class="header-anchor" href="#programming-paradigm">§</a></h2>
<p>Lake draws ideas from a wide variety of programming paradigms (and some non-programming ones), in particular:</p>
<ul>
<li>Dataflow programming</li>
<li>Functional programming</li>
<li>Reactive programming</li>
<li>Event-driven programming</li>
<li>Object-oriented programming</li>
<li>Presentational languages</li>
<li>Domain-specific languages</li>
<li>Parametric and generative design</li>
</ul>
<p>Lake cannot be directly classified into a specific family of existing languages. However, it is fundamentally structured around a hierarchical JSON-like object model, and the way its components work and interact has some similarities to JavaScript frameworks such as React and Svelte, though it doesn't incorporate native support for HTML or CSS, so it can't really be classified as a &quot;true&quot; web language.</p>
<p>It can be seen as a generalization of many declarative patterns that have been found useful for web programming, as well as for other domains such as user-interface design, computer graphics, and animation, game programming, typesetting, and visualization.</p>
</section>
<section>
<h2 id="intended-applications">Intended applications <a class="header-anchor" href="#intended-applications">§</a></h2>
<p>(this is a partial list)</p>
<ul>
<li>UI elements and components</li>
<li>2D vector graphics</li>
<li>3D models and scenes</li>
<li>Computer Aided Design (CAD)</li>
<li>Procedurally generated graphics and animations</li>
<li>Game programming</li>
<li>Chart, plot and diagram generation</li>
<li>Mathematical and scientific visualizations</li>
<li>Simulations and modeling</li>
<li>Typesetting and desktop publishing (PostScript / TeX alternative)</li>
<li>Parametric typeface design</li>
<li>Audio synthesis and filter chains</li>
<li>A more advanced <strong>JSON alternative</strong>: an interchange format for specifying data structures which may involve light computations and modularity, such as configuration, settings and resource management files.</li>
</ul>
</section>
</section>
<section>
<h1 id="introductory-guide">Introductory guide <a class="header-anchor" href="#introductory-guide">§</a></h1>
<section>
<h2 id="illustrative-code-example">Illustrative code example <a class="header-anchor" href="#illustrative-code-example">§</a></h2>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #A1A1A1">// Component metadata:</span></span>
<span class="line"><span style="color: #0059E8">meta</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Demo</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	description</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">A simple demo</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Imports:</span></span>
<span class="line"><span style="color: #5B5B5B">Circle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">https://example.com/lib/Circle.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">Line</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">https://example.com/lib/Line.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">Triangle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">https://example.com/lib/Triangle.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">average</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">math.js</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">.average </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">elements </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #000000">=</span><span style="color: #5B5B5B">&gt; </span><span style="color: #0059E8">decimal</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">hslaToRgba</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">helpers.js</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">.hslaToRgba </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">hsla </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Color.HSLA</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #000000">=</span><span style="color: #5B5B5B">&gt; Color.RGBA</span></span>
<span class="line"><span style="color: #5B5B5B">rgbaToHsla</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">helpers.js</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">.rgbaToHsla </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">hsla </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Color.RGBA</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #000000">=</span><span style="color: #5B5B5B">&gt; Color.HSLA</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Inputs:</span></span>
<span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> centerPoint</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Point</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">10</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">20</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">centerPoint.</span><span style="color: #0059E8">meta</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Center point</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	range</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">, end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">100</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">100</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> endPoint</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Point</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">50</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">40</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">endPoint.</span><span style="color: #0059E8">meta</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">End point</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	range</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">, end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">100</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">100</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> triangleColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"><span style="color: #5B5B5B">triangleColor.</span><span style="color: #0059E8">meta</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Triangle color</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Events:</span></span>
<span class="line"><span style="color: #0059E8">event</span><span style="color: #5B5B5B"> shapeClicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	kind </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> ShapeKind</span></span>
<span class="line"><span style="color: #5B5B5B">	position </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Point</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">event</span><span style="color: #5B5B5B"> triangleColorIsGreen</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Objects and properties:</span></span>
<span class="line"><span style="color: #5B5B5B">someRectangle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Rectangle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> centerPoint</span></span>
<span class="line"><span style="color: #5B5B5B">	width</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> c1.diameter</span></span>
<span class="line"><span style="color: #5B5B5B">	height</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> width</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B"> 	</span><span style="color: #A1A1A1">// Handles Rectangle&#39;s &#39;clicked&#39; event with an action block:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #A1A1A1">// Triggers the component&#39;s &#39;shapeClicked&#39; event:</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> shapeClicked </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> kind</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Rectangle, position</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> center </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someLine</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Line </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> centerPoint</span></span>
<span class="line"><span style="color: #5B5B5B">	end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> endPoint</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blackTransparentColor</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">67</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// Handles Line&#39;s &#39;clicked&#39; event with an action block:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> shapeClicked </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> kind</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Line, position</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> start </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someBezier</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Bezier </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> centerPoint</span></span>
<span class="line"><span style="color: #5B5B5B">	end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> endPoint</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	control1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">45</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">23</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	control2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">65</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">32</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blackTransparentColor</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">40</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someTriangle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Triangle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	vertices</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [centerPoint, </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">14</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">1</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">, </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">7</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">9</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> triangleColor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// Handles Triangle&#39;s &#39;clicked&#39; event:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #A1A1A1">// Sets triangleColor input to red:</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #A1A1A1">// Animates centerPoint&#39;s x coordinate, depending on its initial position:</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> centerPoint.x </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">400</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> centerPoint.x </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> centerPoint.x </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">50</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">				duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">4</span></span>
<span class="line"><span style="color: #5B5B5B">				interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> EaseInOut</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">1</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">otherwise</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> centerPoint.x </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> centerPoint.x </span><span style="color: #000000">-</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">50</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">				duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">4</span></span>
<span class="line"><span style="color: #5B5B5B">				interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> EaseInOut</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">1</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> shapeClicked </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> kind</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Triangle, position</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> centerPoint </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someLines</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Line[] [ </span><span style="color: #A1A1A1">// Defines a sequence of 2 Line objects</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">		end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">,</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">		end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">5</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">otherLines</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Line[k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">6</span><span style="color: #5B5B5B">] </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Algorithmically generates an array of 6 Line objects</span></span>
<span class="line"><span style="color: #5B5B5B">	start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, k </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	end</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">k </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">10</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Responsive observer</span></span>
<span class="line"><span style="color: #0059E8">whenever</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> Green</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> triangleColorIsGreen</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Functions</span></span>
<span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> square</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Templates:</span></span>
<span class="line"><span style="color: #0059E8">template</span><span style="color: #5B5B5B"> NiceCircle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> centerPoint</span></span>
<span class="line"><span style="color: #5B5B5B">	radius </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">template</span><span style="color: #5B5B5B"> UnitCircle</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">center </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Point</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">final</span><span style="color: #5B5B5B"> radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Mixins:</span></span>
<span class="line"><span style="color: #0059E8">mixin</span><span style="color: #5B5B5B"> blackTransparentColor</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	opacity</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> a &gt; </span><span style="color: #E65C00">5</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">50</span><span style="color: #5B5B5B">%</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> a &lt; </span><span style="color: #E65C00">5</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">30</span><span style="color: #5B5B5B">%</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">15</span><span style="color: #5B5B5B">%</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Custom units:</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> cm</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">m</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">01</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> m</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> m</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">cm</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> cm</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> `%`</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">cm</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> cm </span><span style="color: #000000">/</span><span style="color: #5B5B5B"> totalWidth</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">cm</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> cm</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Custom types:</span></span>
<span class="line"><span style="color: #0059E8">type</span><span style="color: #5B5B5B"> Point</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, y </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">variant</span><span style="color: #5B5B5B"> ShapeKind</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	Rectangle</span></span>
<span class="line"><span style="color: #5B5B5B">	Line</span></span>
<span class="line"><span style="color: #5B5B5B">	Triangle</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">variant</span><span style="color: #5B5B5B"> Color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	RGBA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">r </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, g </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	RGBA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">hsla </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> HSLA</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> hslaToRgba</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">hsla</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	RGB</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">r </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, g </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGBA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">r, g, b, </span><span style="color: #E65C00">255</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	HSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">h </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, s </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, l </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	HSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">rgba </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> RGBA</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> rgbaToHSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">rgba</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	HSL</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">h </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, s </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, l </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> HSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">h, s, l, </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	Black</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	White</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	Red</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	Green</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	Blue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="every-source-file-is-a-single-component">Every source file is a single component <a class="header-anchor" href="#every-source-file-is-a-single-component">§</a></h2>
<p>A component is defined by its set of inputs (free variables) and properties (dependent variables or constants), as well as miscellaneous other elements like functions, templates, events, mixins, and others.</p>
</section>
<section>
<h2 id="a-source-file-is-composed-of-a-set-of-declarations">A source file is composed of a set of declarations <a class="header-anchor" href="#a-source-file-is-composed-of-a-set-of-declarations">§</a></h2>
<p>Declarations introduce new identifiers, and may have values of primitive (<code>integer</code>, <code>decimal</code>, <code>string</code>, <code>boolean</code> etc.), array, object, or more advanced types:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">numberValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">45</span></span>
<span class="line"><span style="color: #5B5B5B">stringValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Hello</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">booleanValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">arrayValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
<p>Like in JSON, Objects are declared in curly braces, and may nest other objects:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">objectProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	numberProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">55</span></span>
<span class="line"><span style="color: #5B5B5B">	stringProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">World</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	nestedObjectProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		deepNestedProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="inputs-are-free-variables-that-are-used-to-customize-and-control-the-component">Inputs are free variables that are used to customize and control the component <a class="header-anchor" href="#inputs-are-free-variables-that-are-used-to-customize-and-control-the-component">§</a></h2>
<p>Inputs are the only kinds of variables whose values can change. They can be reassigned by the host application, or within special action blocks (actions are introduced in a later chapter).</p>
<p>Inputs must receive default values:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> someInput</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span></span>
<span class="line"></span></code></pre>
<p>To state the type of the input, use the <code>as</code> operator:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> someInput </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span></span>
<span class="line"></span></code></pre>
<p>Inputs can also be designed to accept empty values (called <code>none</code> in Lake, <code>null</code> in JavaScript). However, since Lake types are not nullable by default, this has to be stated explicitly, as part of the type:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> someInput </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B"> </span><span style="color: #000000">or</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">none</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">none</span></span>
<span class="line"></span></code></pre>
<p>Same can be expressed using the <code>type?</code> abbreviation:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> someInput </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">?</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">none</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="properties-are-dependent-variables-that-can-be-computed-using-other-variables">Properties are dependent variables that can be computed using other variables <a class="header-anchor" href="#properties-are-dependent-variables-that-can-be-computed-using-other-variables">§</a></h2>
<p>A property is bound to an expression (aka a &quot;formula&quot;) via the <code>:</code> operator. The expression may refer to any identifier in scope (declaration order does not matter):</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> someInput</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">componentProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	numberProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">20</span></span>
<span class="line"><span style="color: #5B5B5B">	computedProperty</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">/</span><span style="color: #5B5B5B"> numberProperty </span><span style="color: #A1A1A1">// initially evaluates to 5</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="property-expressions-may-include-conditionals">Property expressions may include conditionals <a class="header-anchor" href="#property-expressions-may-include-conditionals">§</a></h2>
<p>To define a conditional as a part of an expression, this syntax can be used:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">conditionalValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
<p>The <code>when</code>-<code>otherwise</code> syntax is similar to <code>if</code>-<code>else if</code>-<code>else</code> syntax in other languages, only simpler. In this syntax, all the non-final clauses are stated using <code>when</code> and the final one using <code>otherwise</code>. Because Lake doesn't support null (empty) values, an <code>otherwise</code> clause is always required.</p>
<p>In each clause body, the arrow (<code>=&gt;</code>) signifies the &quot;output&quot; of the <code>when</code> expression. As you'll see in the next chapters, in Lake, many kinds of expressions can be seen as having inputs and outputs, just like methods, so the <code>=&gt;</code> here has a lot in common with the value returned from a function.</p>
<p>A second variant of the syntax may also introduce a <code>compute</code> (or &quot;formula&quot;) block, which allows laying out the computation over multiple statements. This is equivalent:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">conditionalValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Commas are not necessary</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>When multiple properties include similar conditionals, like in:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someObject</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">good!</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">ahh..</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">bad!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>They can be refactored by defining both properties together using a single formula block that returns a tuple for the values of both:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someObject</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop1, prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">good!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> someInput </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">ahh..</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">bad!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="prototype-references-allow-objects-to-build-on-top-of-other-objects">Prototype references allow objects to build on top of other objects <a class="header-anchor" href="#prototype-references-allow-objects-to-build-on-top-of-other-objects">§</a></h2>
<p>Object declarations may specify a <strong>prototype</strong>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">elementName</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> PrototypeName </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	.... </span><span style="color: #A1A1A1">// inputs or properties to set</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>A prototype reference may either be a:</p>
<ul>
<li>Component</li>
<li>Template</li>
<li>Secondary object</li>
</ul>
<p>which would serve as a basis for the newly declared object.</p>
<section>
<h3 id="objects-deriving-from-a-prototype-may-be-anonymous">Objects deriving from a prototype may be anonymous <a class="header-anchor" href="#objects-deriving-from-a-prototype-may-be-anonymous">§</a></h3>
<p>When a prototype reference is included, the identifier may be omitted, resulting in an <strong>anonymous object</strong>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">PrototypeName </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Anonymous objects are useful as presentational elements and are loosely analogous to XML elements with no <code>id</code> attribute specified.</p>
<p>Anonymous objects must specify a prototype - an object cannot be both anonymous and lack a prototype.</p>
</section>
</section>
<section>
<h2 id="templates-are-objects-with-unset-properties%2C-which-can-only-be-used-as-prototypes">Templates are objects with unset properties, which can only be used as prototypes <a class="header-anchor" href="#templates-are-objects-with-unset-properties%2C-which-can-only-be-used-as-prototypes">§</a></h2>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">template</span><span style="color: #5B5B5B"> MyTemplate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">5</span></span>
<span class="line"><span style="color: #5B5B5B">	prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">5</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span></span>
<span class="line"><span style="color: #5B5B5B">	prop3 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// This property is unset and must be overriden</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p><code>MyTemplate</code> can now be used as a basis to a new object:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">newObject</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> MyTemplate </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop3</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">12</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// A value for prop3 is required</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="templates-may-accept-arguments%3A">Templates may accept arguments: <a class="header-anchor" href="#templates-may-accept-arguments%3A">§</a></h3>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">template</span><span style="color: #5B5B5B"> TemplateWithArgument</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x</span></span>
<span class="line"><span style="color: #5B5B5B">	prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span></span>
<span class="line"><span style="color: #5B5B5B">	prop3 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p><code>TemplateWithArgument</code> requires an argument when used:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">newObject</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> TemplateWithArgument</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">55</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop3</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">12</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
</section>
<section>
<h2 id="functions-perform-computations-based-on-a-set-of-arguments">Functions perform computations based on a set of arguments <a class="header-anchor" href="#functions-perform-computations-based-on-a-set-of-arguments">§</a></h2>
<p>Here's a function that computes a simple value:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> absoluteValue</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> x </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x, </span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #5B5B5B">x</span></span>
<span class="line"></span></code></pre>
<p>The function body can also be written in a block:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> absoluteValue</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// &#39;: compute&#39; is not required</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> x </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #5B5B5B">x</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>To explicitly specify the return type of the function, add the type annotation before the opening brace:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> absoluteValue</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> x </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #5B5B5B">x</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="function-parameters-may-be-optional-and-have-default-values">Function parameters may be optional and have default values <a class="header-anchor" href="#function-parameters-may-be-optional-and-have-default-values">§</a></h3>
<p>Default parameter values are stated using the universal definition syntax <code>indentifier: defaultValue</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> someFunction</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span><span style="color: #5B5B5B">, c</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">42</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Optional parameters must have default values. The language doesn't support implicit &quot;null&quot; values. However, the <code>none</code> type can be accepted by using a choice type like <code>decimal or none</code>, which can also be abbreviated as <code>decimal?</code> (choice types are introduced in a later chapter).</p>
<p>To explicitly state the type of function parameter defined using a default value, use the <code>as</code> operator over the parameter name:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> someFunction</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span><span style="color: #5B5B5B">, c </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">42</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="function-arguments-can-be-named">Function arguments can be named <a class="header-anchor" href="#function-arguments-can-be-named">§</a></h3>
<p>When calling a function, arguments can be passed out-of-order by referencing their names:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">result</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> someFunction</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">53</span><span style="color: #5B5B5B">, c</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">world</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, b</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hello</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="functions-can-recursively-call-themselves">Functions can recursively call themselves <a class="header-anchor" href="#functions-can-recursively-call-themselves">§</a></h3>
<p>Here are some examples of recursive functions.</p>
<p>The following function computes the sum of a sequence, by calling itself when the sequence is not empty, with the subsequence starting at the second element, and with the first element of the sequence added to its named return variable (<code>sum</code>). In this way, it eventually computes the sum of the sequence:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> sumSequence</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">numbers </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">sum</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> numbers.length </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> sum</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> sumSequence</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">numbers</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> numbers[</span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">..], sum</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> sum </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> numbers[</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">]</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>This function computes the nth Fibonacci number by iteratively calling itself, passing the updated intermediate state to the next iteration at each step, until it reaches the stopping condition of <code>i &gt;= n</code>.</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> fibonacci</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">n </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #5B5B5B">, i</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, prev1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, prev2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">result</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> i </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> n</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> result</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> fibonacci </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// This is an alternative syntax for fibonacci(....)</span></span>
<span class="line"><span style="color: #5B5B5B">		i</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> i </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span></span>
<span class="line"><span style="color: #5B5B5B">		prev1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> result</span></span>
<span class="line"><span style="color: #5B5B5B">		prev2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> prev1</span></span>
<span class="line"><span style="color: #5B5B5B">		result</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> prev1 </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> prev2</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Here's another example, which uses two local recursive operations to implement the QuickSort algorithm:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> quicksort</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">[] </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> items.length </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> []</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> pivot</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> nums[nums.length </span><span style="color: #000000">div</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> sortedSmallerNumbers</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> quicksort</span><span style="color: #B43AFF">(</span><span style="color: #0059E8">select all</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num &lt; pivot</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> sortedGreaterOrEqualNumbers</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> quicksort</span><span style="color: #B43AFF">(</span><span style="color: #0059E8">select all</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> pivot</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		sortedSmallerNumbers </span><span style="color: #000000">|</span><span style="color: #5B5B5B"> sortedGreaterOrEqualNumbers</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
</section>
<section>
<h2 id="formulas-are-similar-to-functions%2C-but-also-allow-references-to-outer-variables">Formulas are similar to functions, but also allow references to outer variables <a class="header-anchor" href="#formulas-are-similar-to-functions%2C-but-also-allow-references-to-outer-variables">§</a></h2>
<p>Formulas are a reusable form of the <code>compute</code> blocks used in property declarations.</p>
<p>A formula can do anything a function does, but in addition, its output can also use depend on the current state of the component:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> someInput</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">formula</span><span style="color: #5B5B5B"> someFormula</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> someInput</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="mixins-help-reduce-code-redundancy">Mixins help reduce code redundancy <a class="header-anchor" href="#mixins-help-reduce-code-redundancy">§</a></h2>
<p><strong>Mixins</strong> are reusable object fragments that may be embedded within object bodies:</p>
<p>Here's an example of a mixin</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">mixin</span><span style="color: #5B5B5B"> blueAndPartiallyTransparent</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #5B5B5B">	opacity</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">40</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">40</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blueAndPartiallyTransparent</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Rectangle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	top</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	left</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">120</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blueAndPartiallyTransparent</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="mixins-may-accept-arguments">Mixins may accept arguments <a class="header-anchor" href="#mixins-may-accept-arguments">§</a></h3>
<p>We can change the previous example so that the mixin would have its opacity given via a parameter:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">mixin</span><span style="color: #5B5B5B"> blueWithOpacity</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">opacityValue </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #5B5B5B">	opacity</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> opacityValue</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">40</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">40</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blueWithOpacity</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Rectangle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	top</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	left</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">120</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blueWithOpacity</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">7</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
</section>
<section>
<h2 id="events-and-actions-model-interaction-and-state-changes">Events and actions model interaction and state changes <a class="header-anchor" href="#events-and-actions-model-interaction-and-state-changes">§</a></h2>
<p>Events are special methods that are used for passing messages to the host application or in-between components.</p>
<p><code>Button.lake</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">event</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	mousePosition </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Point</span></span>
<span class="line"><span style="color: #5B5B5B">	buttonIndex </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Events can be handled via special code blocks called <strong>actions</strong>.</p>
<p>Actions may include one or more input reassignments. The reassigned inputs can belong to any ancestor component in scope, including the top-level component. In this example, the <code>color</code> input of <code>someButton</code> is reassigned:</p>
<p><code>MyComponent.lake</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someButton</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	width</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span></span>
<span class="line"><span style="color: #5B5B5B">	height</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">20</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// &#39;on clicked&#39; handler is called when the &#39;clicked&#39; event is triggered:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">event</span><span style="color: #5B5B5B">.buttonIndex </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// The &#39;event&#39; keyword refers to handled event data object</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> color </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">otherwise</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> color </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="actions-may-trigger-secondary-events">Actions may trigger secondary events <a class="header-anchor" href="#actions-may-trigger-secondary-events">§</a></h3>
<p>Here a secondary event <code>someButtonClicked</code> is triggered whenever <code>Button.clicked</code> is triggered:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">event</span><span style="color: #5B5B5B"> someButtonClicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	buttonIndex </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someButton</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	width</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span></span>
<span class="line"><span style="color: #5B5B5B">	height</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">20</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> color </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #A1A1A1">// This would trigger the &#39;someButtonClicked&#39; event:</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> someButtonClicked </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> buttonIndex</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">event</span><span style="color: #5B5B5B">.buttonIndex </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="top-level-handlers-can-listen-to-the-component's-own-events">Top-level handlers can listen to the component's own events <a class="header-anchor" href="#top-level-handlers-can-listen-to-the-component's-own-events">§</a></h3>
<p>Handlers can also be defined at the top-level, for the component's own events. In this example, clicking either the triangle or rectangle would cause the component's <code>shapeClicked</code> event to be triggered. A top-level event handler, would then cause the color of both shapes to change to blue:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> shapeColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">event</span><span style="color: #5B5B5B"> shapeClicked</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> shapeClicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> shapeColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Triangle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> shapeColor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> shapeClicked</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Rectangle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> shapeColor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> shapeClicked</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="actions-can-be-declared-as-reusable-methods">Actions can be declared as reusable methods <a class="header-anchor" href="#actions-can-be-declared-as-reusable-methods">§</a></h3>
<p>and accept arguments:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> buttonColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">action</span><span style="color: #5B5B5B"> changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">newColor </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Color</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> buttonColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> newColor</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someButton</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> buttonColor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B">	changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">Red</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Action methods may also be called from within action blocks (or other action methods):</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> buttonColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> buttonWidth</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">action</span><span style="color: #5B5B5B"> changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">newColor </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Color</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> buttonColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> newColor</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">action</span><span style="color: #5B5B5B"> changeButtonWidthTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">newWidth </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> buttonWidth </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> newWidth</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someButton</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> buttonColor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">Red</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">		changeButtonWidthTo</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">20</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="event-handlers-may-include-preconditions">Event handlers may include preconditions <a class="header-anchor" href="#event-handlers-may-include-preconditions">§</a></h3>
<p>Preconditions can be added to <code>on</code> handler syntax using the <code>when</code> keyword:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someButton</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> buttonColor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">event</span><span style="color: #5B5B5B">.mouseButton </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> MouseButton.Left</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">Red</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked </span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">event</span><span style="color: #5B5B5B">.mouseButton </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> MouseButton.Right</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">Blue</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
</section>
<section>
<h2 id="responsive-observers-automatically-initiate-actions-when-a-precondition-is-met">Responsive observers automatically initiate actions when a precondition is met <a class="header-anchor" href="#responsive-observers-automatically-initiate-actions-when-a-precondition-is-met">§</a></h2>
<p>A responsive observer is a persistent listener that continuously monitors for a particular precondition to hold. At each state change that potentially affects the truth value of its precondition, it checks if the precondition has become satisfied. If the precondition evaluates to <code>true</code>, it performs an action, which may also trigger one or more events:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> triangleColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">event</span><span style="color: #5B5B5B"> triangleColorIsGreen</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">whenever</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> Green</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">trigger</span><span style="color: #5B5B5B"> triangleColorIsGreen</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>The <code>whenever</code> keyword is followed by a boolean expression, that defines the precondition, followed by a <code>do</code> block or action method call.</p>
<p>After the action is executed, the program would wait for the precondition to evaluate back to <code>false</code> again. At that point, the listener would be reset, and would trigger again if its precondition evaluates back to <code>true</code>.</p>
<section>
<h3 id="responsive-observers-can-also-be-declared-locally%2C-inside-object-blocks">Responsive observers can also be declared locally, inside object blocks <a class="header-anchor" href="#responsive-observers-can-also-be-declared-locally%2C-inside-object-blocks">§</a></h3>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">mySlider</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Slider </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	value</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">whenever</span><span style="color: #5B5B5B"> value </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">50</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">whenever</span><span style="color: #5B5B5B"> value &lt; </span><span style="color: #E65C00">50</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="be-careful%3A-responsive-observers-may-produce-feedback-loops">Be careful: responsive observers may produce feedback loops <a class="header-anchor" href="#be-careful%3A-responsive-observers-may-produce-feedback-loops">§</a></h3>
<p>Here are two responsive observers that would cause an infinite feedback loop, that would cause the program to hang:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">whenever</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> Red</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">whenever</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> Blue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> triangleColor </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>You'll need to ensure that the precondition does not depend on inputs that are modified as a result of the action that it initiates, otherwise you may run the risk of infinite loops of this sort. The compiler will try to help by detecting obvious cases of circular dependencies of this kind, but it may not be able to identify all cases.</p>
</section>
</section>
<section>
<h2 id="time-based-interpolation-of-inputs">Time-based interpolation of inputs <a class="header-anchor" href="#time-based-interpolation-of-inputs">§</a></h2>
<p>Lake includes native support for &quot;animating&quot; an input, or one of its properties, over time:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> radius </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> radius </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> easeInOut </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Clicking the circle would start an animation-like update sequence that would gradually increase the <code>radius</code> input of the circle until it reaches double its original value. The <code>duration</code> option sets the total time of the process to 1.0 seconds. The <code>interpolation</code> option accepts a function that computes the intermediate values of the target value over time. In this example, it uses a function called <code>EaseInOut</code> which uses a Bézier curve to interpolate the value while accelerating at the start and decelerating at the end.</p>
<section>
<h3 id="running-several-transitions-in-sequence">Running several transitions in sequence <a class="header-anchor" href="#running-several-transitions-in-sequence">§</a></h3>
<p>By default, launching a <code>transition</code> will return immediately, without waiting for the transition to finish. This is important to ensure the program would still be responsive even when a transition is actively running. To run several transitions in sequence, use the <code>spawn</code> keyword instead of <code>do</code>, and set the <code>wait</code> property to <code>true</code> for each <code>transition</code>'s options object:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">spawn</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> radius </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> radius </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">			interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> EaseInOut</span></span>
<span class="line"><span style="color: #5B5B5B">			wait</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> center.x </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> center.x </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"><span style="color: #5B5B5B">			interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Linear</span></span>
<span class="line"><span style="color: #5B5B5B">			wait</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>This launches a sequence of synchronous <code>transition</code> operations that run in the background and don't block the program.</p>
</section>
<section>
<h3 id="launching-a-complex-combination-of-sequential-and-parallel-transitions">Launching a complex combination of sequential and parallel transitions <a class="header-anchor" href="#launching-a-complex-combination-of-sequential-and-parallel-transitions">§</a></h3>
<p>For more complex scenarios, you can use the <code>spawn</code> keyword to launch several execution threads that will be run in parallel. In this example, one thread transitions the <code>radius</code> input of <code>Circle</code>, and the other its <code>center</code> input:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">spawn</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> radius </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> radius </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">				duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">				interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> EaseInOut</span></span>
<span class="line"><span style="color: #5B5B5B">				wait</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> color </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Blue</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">spawn</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> center.x </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> center.x </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">				duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"><span style="color: #5B5B5B">				interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Linear</span></span>
<span class="line"><span style="color: #5B5B5B">				wait</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> center.y </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> center.y </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">100</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">				duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"><span style="color: #5B5B5B">				interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Linear</span></span>
<span class="line"><span style="color: #5B5B5B">				wait</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> color </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> Red</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Note that initiating several such sequences in parallel may lead to unexpected results, where inputs may be reassigned in unintended orders, and it may become difficult to keep track of the component's state. It is important to be careful not to overuse this feature and try to minimize complexity of this kind.</p>
</section>
<section>
<h3 id="using-a-custom-interpolation-function">Using a custom interpolation function <a class="header-anchor" href="#using-a-custom-interpolation-function">§</a></h3>
<p>Since any interpolation function can be used, time-based interpolation is not only limited to simple numeric values. It can be applied to more complex types like tuples, sequences, strings, or even arbitrary objects!</p>
<p>The interpolation function is a simple function that accepts a start value, an end value, and a number between 0.0 and 1.0 that represents the current relative position in the timeline.</p>
<p>Here's an example of a linear interpolation function that can be passed as an argument to <code>transition</code> <code>interpolation</code> option:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> linearInterpolation</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">start </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, end </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, position </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	start </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">end </span><span style="color: #000000">-</span><span style="color: #5B5B5B"> start</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> position</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	...</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> length </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> length </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> linearInterpolation </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>This example linearly interpolates the elements of a pair, represented as a tuple:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">type</span><span style="color: #5B5B5B"> Location</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, y </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> locationInterpolation</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">start </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Location, end </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Location, position </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">linearInterpolation</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">start.x, end.x, position</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">, linearInterpolation</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">start.y, end.y, position</span><span style="color: #B43AFF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> location</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Location</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	...</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">transition</span><span style="color: #5B5B5B"> location </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">location.x </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span><span style="color: #5B5B5B">, location.y </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">using</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		duration</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">		interpolation</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> locationInterpolation</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="update-rate">Update rate <a class="header-anchor" href="#update-rate">§</a></h3>
<p>The update rate (frame rate) of the transition is a controlled by the host, and may be dynamically increased or decreased based on user settings or factors like CPU load, process priority, etc.</p>
</section>
</section>
<section>
<h2 id="locals-help-to-represent-intermediate-computations">Locals help to represent intermediate computations <a class="header-anchor" href="#locals-help-to-represent-intermediate-computations">§</a></h2>
<p>Locals are definitions that may be introduced nearly anywhere in the code, including within object bodies, templates, functions, actions and mixins.</p>
<p>Locals cannot be referenced from outside their own scope and do not become a part of the object hierarchy.</p>
<p>Almost all declarations can be made locally. This includes local properties, functions, formulas, templates, mixins, action methods and types aliases.</p>
<p>Local declarations must be prefixed by the <code>local</code> keyword. The prefix is required to ensure programs making use of locals would be easy to read and understand.</p>
<section>
<h3 id="properties-can-be-local">Properties can be local <a class="header-anchor" href="#properties-can-be-local">§</a></h3>
<p>In this example, a local property (<code>sum</code>) is declared from within a function body:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> averageOf2</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> sum</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> a </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> b</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	sum </span><span style="color: #000000">/</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="functions-and-formulas-can-be-local">Functions and formulas can be local <a class="header-anchor" href="#functions-and-formulas-can-be-local">§</a></h3>
<p>In this example, a local function is defined within an event handler's body:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> num1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span></span>
<span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> num2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> triple</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">n </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> n </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> num1 </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> triple</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">num1</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> num2 </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> triple</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">num2</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="templates-can-be-local">Templates can be local <a class="header-anchor" href="#templates-can-be-local">§</a></h3>
</section>
<section>
<h3 id="mixins-can-be-local">Mixins can be local <a class="header-anchor" href="#mixins-can-be-local">§</a></h3>
<p>In this example, a local mixin is defined within an object definition:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">Panel </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">mixin</span><span style="color: #5B5B5B"> blackTextColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		textColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	buttons</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button[] [</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			text</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Click this</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blackTextColor</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">,</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			text</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Don&#39;t click this</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">			</span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> blackTextColor</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	]</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="action-methods-can-be-local">Action methods can be local <a class="header-anchor" href="#action-methods-can-be-local">§</a></h3>
<p>Here, a local action method is defined within an object definition:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someButton</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Button </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	color</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Black</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">action</span><span style="color: #5B5B5B"> changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">newColor </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Color</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> color </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> newColor</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B">	changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">Red</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> dragged</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> changeButtonColorTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">Blue</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="type-aliases-can-be-local">Type aliases can be local <a class="header-anchor" href="#type-aliases-can-be-local">§</a></h3>
<p>Here, a local type is defined within an object definition:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someObject </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">type</span><span style="color: #5B5B5B"> MyType</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[</span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	someProp</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> MyType [</span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">6</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
</section>
<section>
<h2 id="sequences">Sequences <a class="header-anchor" href="#sequences">§</a></h2>
<p>A Lake sequence represents a succession of values, and is similar to lists in other languages.</p>
<p>A sequence is written like a JSON-style array:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">numberSequence</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">objectSequence</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		prop1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">65</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">		prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">true</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">,</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		prop1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">12</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span></span>
<span class="line"><span style="color: #5B5B5B">		prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">false</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="sequence-elements-may-be-typed-with-a-prototype">Sequence elements may be typed with a prototype <a class="header-anchor" href="#sequence-elements-may-be-typed-with-a-prototype">§</a></h3>
<p>Appending <code>[]</code> to the prototype indicates a sequence of elements of that type:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">mySequence</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Circle[] [</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">		center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">2</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">,</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">		center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">7</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="sequence-indices-can-receive-custom-ranges">Sequence indices can receive custom ranges <a class="header-anchor" href="#sequence-indices-can-receive-custom-ranges">§</a></h3>
<p>If you wish to ensure that the number of elements is some exact constant, you can also specify it explicitly. For example:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">fiveNumbers</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">] [</span><span style="color: #E65C00">7</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
<p>To specify a starting index other than <code>1</code> (the default), a range can be used:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">fiveNumbers</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[</span><span style="color: #E65C00">10</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">15</span><span style="color: #5B5B5B">] [</span><span style="color: #E65C00">7</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
<p>Negative indices are also valid:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">fiveNumbers</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[</span><span style="color: #000000">-</span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">] [</span><span style="color: #E65C00">7</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="sequences-can-be-generated-by-iterating-over-other-sequences">Sequences can be generated by iterating over other sequences <a class="header-anchor" href="#sequences-can-be-generated-by-iterating-over-other-sequences">§</a></h3>
<p>using the <strong><code>foreach</code>-<code>in</code></strong> syntax:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">newNames</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> name </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Hello </span><span style="color: #B43AFF">{</span><span style="color: #AA6631">name</span><span style="color: #B43AFF">}</span><span style="color: #AA6631">!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"></span></code></pre>
<p><code>newNames</code> would evaluate to <code>[&quot;Hello Tina!&quot;, &quot;Hello Dan!&quot;, &quot;Hello Julia!&quot;]</code>.</p>
<p>For a more complex expression, a formula block can be used:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">newNames</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> name </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> name </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Hey Dan!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">{</span><span style="color: #AA6631">name</span><span style="color: #B43AFF">}</span><span style="color: #AA6631">?</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p><code>newNames</code> would evaluate to <code>[&quot;Tina?&quot;, &quot;Hey Dan!&quot;, &quot;Julia?&quot;]</code>.</p>
</section>
<section>
<h3 id="foreach-in-iteration-may-filter-elements"><code>foreach</code>-<code>in</code> iteration may filter elements <a class="header-anchor" href="#foreach-in-iteration-may-filter-elements">§</a></h3>
<p>using the <code>where</code> clause:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">newNames</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> name </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> names </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> name </span><span style="color: #000000">!=</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">{</span><span style="color: #AA6631">name</span><span style="color: #B43AFF">}</span><span style="color: #AA6631">!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"></span></code></pre>
<p><code>newNames</code> would evaluate to <code>[&quot;Tina!&quot;, &quot;Julia!&quot;]</code>.</p>
<p><em>(note that referencing the index of an element of a computed sequence involving a <code>where</code> clause, e.g. <code>newNames[2]</code>, may require the condition to be evaluated for all indices prior to the target one, so the operation may become linear-time, instead of constant-time)</em></p>
</section>
<section>
<h3 id="foreach-in-may-be-applied-to-multiple-sequences-simultaneously"><code>foreach</code>-<code>in</code> may be applied to multiple sequences simultaneously <a class="header-anchor" href="#foreach-in-may-be-applied-to-multiple-sequences-simultaneously">§</a></h3>
<p>by separating multiple <code>x in sequence</code> clauses with a comma:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">ages</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #E65C00">23</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">20</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">33</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">19</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">newNames</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> name </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> names, age </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> ages</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	theName</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> name</span></span>
<span class="line"><span style="color: #5B5B5B">	theAge</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> age</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>Both sequences would be iterated at the same time, that is, at first <code>name[1]</code> and <code>age[1]</code>, then <code>name[2]</code> and <code>age[2]</code>, and so on. If the two sequences have different lengths, iteration would stop when the first of them ends.</p>
<p><code>newNames</code> would evaluate to:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">[</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> theName</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, theAge</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">23</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> theName</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, theAge</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">20</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> theName</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, theAge</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">33</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="foreach-in-may-be-nested"><code>foreach</code>-<code>in</code> may be nested <a class="header-anchor" href="#foreach-in-may-be-nested">§</a></h3>
<p>Nesting <code>foreach</code> expressions would generate a sequence of sequences that enumerate all permutations of sequence elements:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">associateNames</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">pairings</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> employeeName </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> names</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> associateName </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> associateNames</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> employeeName</span></span>
<span class="line"><span style="color: #5B5B5B">			associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> associateName</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p><code>pairings</code> would evaluate to</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">[</span></span>
<span class="line"><span style="color: #5B5B5B">	[</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">, </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">	[</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">, </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">	[</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">, </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
<p>To flatten these to a single dimensional sequence, use the <code>flattened</code> property:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">flattenedPairings</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> pairings.flattened</span></span>
<span class="line"></span></code></pre>
<p>which results in:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">[</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Tina</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Dan</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Maya</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Julia</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, associate</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Andy</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">]</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="when-only-filtering-is-desired%2C-use-select-all">When only filtering is desired, use <code>select all</code> <a class="header-anchor" href="#when-only-filtering-is-desired%2C-use-select-all">§</a></h3>
<p>Instead of:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">onlyPositiveNums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num</span></span>
<span class="line"></span></code></pre>
<p>You can write:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">onlyPositiveNums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">select all</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="to-retrieve-only-the-first-match%2C-use-select-first">To retrieve only the first match, use <code>select first</code> <a class="header-anchor" href="#to-retrieve-only-the-first-match%2C-use-select-first">§</a></h3>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #000000">-</span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">, </span><span style="color: #000000">-</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">7</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #5B5B5B">firstPositiveNum</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">select first</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
<p><code>firstPositiveNum</code> gets the value <code>7</code></p>
<p>(if no match was found, the value would be <code>none</code>).</p>
<p>To retrieve the index of the first match, use the <code>.range</code> property:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">firstPositiveNumIndex</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">select first</span><span style="color: #5B5B5B"> i </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums.range </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> nums[i] </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
<p><code>firstPositiveNumIndex</code> gets the value <code>3</code></p>
</section>
</section>
<section>
<h2 id="sequences-can-be-generated-algorithmically">Sequences can be generated algorithmically <a class="header-anchor" href="#sequences-can-be-generated-algorithmically">§</a></h2>
<p>This would generate a sequence of <code>Circle</code> objects of size <code>circleCount</code> where each circle of index <code>k</code> has center <code>(3 * k, 2 * k)</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">mySequence </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> Circle[k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..circleCount]</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #E65C00">3</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> k, </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> k</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="computed-sequences-may-be-infinite">Computed sequences may be infinite <a class="header-anchor" href="#computed-sequences-may-be-infinite">§</a></h3>
<p>Lake is <a href="https://en.wikipedia.org/wiki/Lazy_evaluation">lazily evaluated</a>. This means that values are computed only when they are truly needed.</p>
<p>For this reason, sequences can also be defined over infinite ranges. This would generate the sequence of all positive even numbers:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">evenNumbers </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #5B5B5B">]</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> k </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span></span>
<span class="line"></span></code></pre>
<p>The way this works is that the sequence acts as if it were a function, where <code>k</code> (the index) acts as an argument, and the evaluated expression acts as the return value. For instance, to retrieve the 100000 element of <code>evenNumbers</code> (<code>evenNumbers[100000]</code>), the expression is evaluated immediately to <code>k * 2</code>, that is, <code>100000 * 2 = 200000</code>.</p>
</section>
<section>
<h3 id="computed-sequences-may-be-defined-by-induction">Computed sequences may be defined by induction <a class="header-anchor" href="#computed-sequences-may-be-defined-by-induction">§</a></h3>
<p>Computed sequence elements may include references to prior elements of the sequence:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">fibonacciNumbers </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #5B5B5B">]</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> k </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B"> </span><span style="color: #000000">or</span><span style="color: #5B5B5B"> k </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> fibonacciNumbers[k</span><span style="color: #000000">-</span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">] </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> fibonacciNumbers[k</span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">]</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>(<em>note that prior elements can only be referenced with the form <code>identifier[k-c]</code>, where <code>c</code> is a constant and <code>k-c</code> is provably a valid index. Using a more complex expression would cause a compilation error</em>)</p>
<p>This kind of computed sequence is called an <strong>inductive sequence</strong>. The above code generates the full series of Fibonacci numbers using an approach resembling <em><a href="https://en.wikipedia.org/wiki/Mathematical_induction">mathematical induction</a></em>.</p>
<p>Reading an inductive sequence at position <code>k</code> may require all of its prior elements to be (re)computed. Random lookups of this kind may become computationally expensive.</p>
<p>However, if the sequence is read sequentially, say, for the above example, over an index range between <code>10</code> to <code>20</code>, the compiler may optimize the calls by caching the value of a few recent indices. For instance, when <code>fibonacciNumbers[20]</code> is read, it may reuse previously computed values for <code>fibonacciNumbers[19]</code> and <code>fibonacciNumbers[18]</code> and in this way compute individual indices in constant time.</p>
</section>
<section>
<h3 id="an-inductive-sequence-can-help-to-implement-an-accumulator-function">An inductive sequence can help to implement an accumulator function <a class="header-anchor" href="#an-inductive-sequence-can-help-to-implement-an-accumulator-function">§</a></h3>
<p>For instance, here's a function that sums a sequence of integers:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> sumNumbers</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">nums </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// Defines a local inductive sequence representing the cumulative sum of nums:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">local</span><span style="color: #5B5B5B"> sums </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums.range]</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> k </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> nums.start</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> nums.first</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> sums[k</span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">] </span><span style="color: #000000">+</span><span style="color: #5B5B5B"> nums[k]</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> nums.length </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> sums.last </span><span style="color: #A1A1A1">// The resulting value is the last element of the sums sequence</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="inductive-sequences-cannot-be-emulated-using-foreach-in">Inductive sequences cannot be emulated using <code>foreach</code>-<code>in</code> <a class="header-anchor" href="#inductive-sequences-cannot-be-emulated-using-foreach-in">§</a></h3>
<p>At first glance,</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">s</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>may seem similar to:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">s </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #5B5B5B">]</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">compute</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>However, using <code>foreach</code>-<code>in</code> in this way wouldn't allow references to the target sequence (<code>s</code> in this example), so inductive sequences wouldn't be possible:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">s</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">foreach</span><span style="color: #5B5B5B"> k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> k </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> s[k</span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">] </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// This won&#39;t compile! `s` cannot be referenced here!</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="inductive-sequence-%E2%89%A0-recursion">Inductive sequence ≠ recursion <a class="header-anchor" href="#inductive-sequence-%E2%89%A0-recursion">§</a></h3>
<p>Iteration of this kind is different from recursion, since unlike a recursion:</p>
<ul>
<li>It is guaranteed to terminate within a finite number of steps.</li>
<li>It is computed in ascending order of indices, and always starts at the first element.</li>
<li>Each element is guaranteed to require constant amount of memory to compute (not proportional to its index). A similar property is also exhibited by a subset of recursions called &quot;tail&quot; recursions.</li>
<li>Evaluation does not involve any <em>transient</em> intermediate state - there are no additional &quot;phantom&quot; iterations used to compute each element (like a local loop or recursion). All intermediate state required to compute element <code>k</code> is contained within its prior elements.</li>
</ul>
</section>
</section>
<section>
<h2 id="ranges-are-sequences%2C-too">Ranges are sequences, too <a class="header-anchor" href="#ranges-are-sequences%2C-too">§</a></h2>
<p>So far we've used expressions like <code>1..100</code> or <code>0..infinity</code>, but haven't really explained what they are, on a technical level. These ranges are actually sequences, and can be used by themselves in various ways.</p>
<p>These are valid definitions:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">seq1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">200</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">205</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Generates the sequence [200, 201, 202, 203, 204, 205]</span></span>
<span class="line"><span style="color: #5B5B5B">seq2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">50</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">5000</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Generates the sequence [-50, -49, ..., 5000]</span></span>
<span class="line"><span style="color: #5B5B5B">seq3</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #000000">-</span><span style="color: #E65C00">1000</span><span style="color: #5B5B5B">..</span><span style="color: #0059E8">infinity</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Generates the infinite sequence [-1000, -999, ...]</span></span>
<span class="line"></span></code></pre>
<p>Ranges can be used as part of functions as well:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> allPositiveIntegersTo</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">k </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">..k </span><span style="color: #A1A1A1">// Generates [1, 2, ..., k]</span></span>
<span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> allIntegersBetween</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">s </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, e </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> s..e </span><span style="color: #A1A1A1">// Generates [s, s + 1, ..., e]</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="boolean-typed-properties-and-functions-describe-the-truth-values-of-expressions">Boolean-typed properties and functions describe the truth-values of expressions <a class="header-anchor" href="#boolean-typed-properties-and-functions-describe-the-truth-values-of-expressions">§</a></h2>
<p>For instance:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">num</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">booleanProp</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// evaluates to `true`</span></span>
<span class="line"></span></code></pre>
<p>and the function:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> positive</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">val </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> val </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">isItPositive</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> positive</span><span style="color: #B43AFF">(</span><span style="color: #000000">-</span><span style="color: #E65C00">11</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// returns `false`</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="a-single-parameter-boolean-typed-function-can-also-be-evaluated-with-the-is-operator">A single parameter boolean typed function can also be evaluated with the <code>is</code> operator <a class="header-anchor" href="#a-single-parameter-boolean-typed-function-can-also-be-evaluated-with-the-is-operator">§</a></h3>
<p>Given:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> positive</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">val </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> val </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
<p>Instead of calling like:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someValueIsPositive</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> positive</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">someValue</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
<p>You can also write:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">someValueIsPositive</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> someValue </span><span style="color: #0059E8">is</span><span style="color: #5B5B5B"> positive</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="forall-in-evaluates-a-boolean-expression-over-each-element-of-a-sequence"><code>forall</code>-<code>in</code> evaluates a Boolean expression over each element of a sequence <a class="header-anchor" href="#forall-in-evaluates-a-boolean-expression-over-each-element-of-a-sequence">§</a></h3>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">allNumsAreGreaterThanZero</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
<p><code>forall</code>-<code>in</code> is different from <code>foreach</code>-<code>in</code>: Instead of building a sequence from elements of another sequence, we are applying a predicate over the elements of the sequence and returning <code>true</code> if the predicate holds for all elements and <code>false</code> if it doesn't.</p>
<p>The <code>|</code> operator can be read as &quot;it holds that&quot;, for example, in natural language, the above <code>forall</code>-<code>in</code> expression means:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5b5b5b">for all num in nums, it holds that num is greater or equal to zero</span></span>
<span class="line"><span style="color: #5b5b5b"></span></span></code></pre>
<p>Same written as a function, where <code>nums</code> is passed as an argument:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> allElementsAreGreaterThanZero</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">nums </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">boolean</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="like-foreach%2C-forall-may-also-include-a-where-clause">Like <code>foreach</code>, <code>forall</code> may also include a <code>where</code> clause <a class="header-anchor" href="#like-foreach%2C-forall-may-also-include-a-where-clause">§</a></h3>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> even</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">val </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">mod</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [</span><span style="color: #000000">-</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">6</span><span style="color: #5B5B5B">, </span><span style="color: #000000">-</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">allPositiveElementsAreEven</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">is</span><span style="color: #5B5B5B"> even</span></span>
<span class="line"></span></code></pre>
<p>In natural language, this can be written as:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5b5b5b">for all num in nums, if num is greater or equal to 0 then it holds that num is even</span></span>
<span class="line"><span style="color: #5b5b5b"></span></span></code></pre>
<p>An equivalent way to express the same logical formula would be to apply the material implication rule:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5b5b5b">P implies Q &lt;=&gt; (not P) or Q</span></span>
<span class="line"><span style="color: #5b5b5b"></span></span></code></pre>
<p>and rewrite <code>allPositiveElementsAreEven</code> as:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">allPositiveElementsAreEven</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num &lt; </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #000000">or</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">is</span><span style="color: #5B5B5B"> even</span></span>
<span class="line"></span></code></pre>
<p>Or in natural language:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5b5b5b">for all num in nums, either num is less than 0, or num is even</span></span>
<span class="line"><span style="color: #5b5b5b"></span></span></code></pre>
</section>
<section>
<h3 id="forall-can-be-applied-over-the-elements-of-multiple-sequences"><code>forall</code> can be applied over the elements of multiple sequences <a class="header-anchor" href="#forall-can-be-applied-over-the-elements-of-multiple-sequences">§</a></h3>
<p>This function would evaluate to <code>true</code> when each values in the first sequence is greater than the corresponding value in the second sequence:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> correspondingElementsAreGreater</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">nums1 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[], nums2 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num1 </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums1, num2 </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num1 &gt; num2</span></span>
<span class="line"></span></code></pre>
<p>To check that <em>every</em> element of <code>nums1</code> is greater than <em>every</em> element of <code>nums2</code> (not just the corresponding one), use a nested <code>forall</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> allElementsAreGreater</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">nums1 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[], nums2 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num1 </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num2 </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">			num1 &gt; num2</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="forall-can-be-applied-over-each-index-of-a-sequence"><code>forall</code> can be applied over each index of a sequence <a class="header-anchor" href="#forall-can-be-applied-over-each-index-of-a-sequence">§</a></h3>
<p>To apply <code>forall</code> over the sequence indices instead, iterate over its <code>.range</code> property.</p>
<p>This function would evaluate to <code>true</code> when all elements with even indices are greater or equal to zero and <code>false</code> if odd indices smaller than zero:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> evenIndicesArePositiveAndOddIndicesAreNegative</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">nums </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">forall</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums, k </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums.range</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> k </span><span style="color: #000000">mod</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">		</span><span style="color: #0059E8">otherwise</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> num &lt; </span><span style="color: #E65C00">0</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="exists-tests-the-existence-of-at-least-one-match"><code>exists</code> tests the existence of at least one match <a class="header-anchor" href="#exists-tests-the-existence-of-at-least-one-match">§</a></h3>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">atLeastOnePositiveElementIsEven</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">exists</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #000000">and</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">mod</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
<p>To get the the first match, use <code>select first</code> instead:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">firstPositiveElementThatIsEven</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">select first</span><span style="color: #5B5B5B"> num </span><span style="color: #0059E8">in</span><span style="color: #5B5B5B"> nums </span><span style="color: #0059E8">where</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">&gt;=</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B"> </span><span style="color: #000000">and</span><span style="color: #5B5B5B"> num </span><span style="color: #000000">mod</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">2</span><span style="color: #5B5B5B"> </span><span style="color: #000000">==</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span></span>
<span class="line"></span></code></pre>
</section>
</section>
</section>
<section>
<h1 id="type-system">Type system <a class="header-anchor" href="#type-system">§</a></h1>
<section>
<h2 id="built-in-types">Built-in types <a class="header-anchor" href="#built-in-types">§</a></h2>
<ul>
<li><code>decimal</code>: a decimal number</li>
<li><code>integer</code>: an integer number</li>
<li><code>number</code>: alias for <code>decimal or integer</code></li>
<li><code>string</code>: a sequence of characters</li>
<li><code>boolean</code>: <code>true</code> or <code>false</code></li>
<li><code>binary</code>: a sequence of bytes</li>
<li><code>regexp</code>: a regular expression</li>
<li><code>none</code>: representing an &quot;empty&quot; value</li>
</ul>
</section>
<section>
<h2 id="objects">Objects <a class="header-anchor" href="#objects">§</a></h2>
<p>Object types are types that can contain a variety of named properties:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	num </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span></span>
<span class="line"><span style="color: #5B5B5B">	strings </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span><span style="color: #5B5B5B">[]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	obj </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		bools </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">boolean</span><span style="color: #5B5B5B">[]</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<section>
<h3 id="updating-object-properties">Updating object properties <a class="header-anchor" href="#updating-object-properties">§</a></h3>
<p>Here's an example of updating an existing object property using the <code>with</code> operator:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> obj</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> num</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">11</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">on</span><span style="color: #5B5B5B"> clicked</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">do</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> obj </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> obj </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> num</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">12</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>This would set <code>obj</code> to a new object where the <code>num</code> property is changed from 11 to 12.</p>
<p>This <code>set</code> statement can also be abbreviated to:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> obj.num </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">12</span></span>
<span class="line"></span></code></pre>
<p>Or since <code>num</code> is incremented in this example, just:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">increment</span><span style="color: #5B5B5B"> obj.num</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h3 id="creating-modified-versions-of-existing-objects">Creating modified versions of existing objects <a class="header-anchor" href="#creating-modified-versions-of-existing-objects">§</a></h3>
<p>Modified and extended copies of objects can be made using the <code>with</code> operator:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">obj1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> num</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">obj2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> obj1 </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> str</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hello</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p><code>obj2</code> receives the value <code>{ num: 1, str: &quot;hello&quot; }</code>.</p>
<p>To specify a property to be removed in the new object, use the <code>no</code> operator:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">obj1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> num1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, str</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hi</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #5B5B5B">obj2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> obj1 </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> num1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">11</span><span style="color: #5B5B5B">, num2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">31</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">no</span><span style="color: #5B5B5B"> str </span><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p><code>obj2</code> receives the value <code>{ num1: 11, num2: 31 }</code>.</p>
</section>
</section>
<section>
<h2 id="tuples">Tuples <a class="header-anchor" href="#tuples">§</a></h2>
<p>A tuple in an ordered sequence of values, where each value may be of a different type.</p>
<p>Examples:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #B43AFF">(</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Hi</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">true</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">[</span><span style="color: #E65C00">10</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">20</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">30</span><span style="color: #5B5B5B">], </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> a</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hello</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, b</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">42</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">})</span></span>
<span class="line"></span></code></pre>
<p>These tuples have these types:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #B43AFF">(</span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">string</span><span style="color: #5B5B5B">, </span><span style="color: #0059E8">boolean</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">(</span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">[], </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">})</span></span>
<span class="line"></span></code></pre>
<p>Tuple type members can also be named:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">num </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, text </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span><span style="color: #5B5B5B">, bool </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">boolean</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="dictionaries">Dictionaries <a class="header-anchor" href="#dictionaries">§</a></h2>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">myDictionary</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Dictionary </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #E65C00">5</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hello</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #E65C00">11</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">world</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>The type of <code>myLookup</code> is inferred as <code>Dictionary&lt;integer, string&gt;</code>.</p>
<p>Like objects, dictionary items can be added and removed using the <code>with</code> and <code>no</code> operators:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #A1A1A1">// Add item to dictionary</span></span>
<span class="line"><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> myDictionary </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> myDictionary </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">3</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">welcome</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Remove item from dictionary</span></span>
<span class="line"><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> myDictionary </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> myDictionary </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">no</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">11</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Update exiting item in the dictionary</span></span>
<span class="line"><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> myDictionary[</span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">] </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hey</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="sets">Sets <a class="header-anchor" href="#sets">§</a></h2>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">mySet</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Set </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hey</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B">, </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">there</span><span style="color: #5B5B5B">&quot;</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>The type of <code>mySet</code> is inferred as <code>Set&lt;string&gt;</code>.</p>
<p>Adding and removing element from a set:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #A1A1A1">// Add element to set</span></span>
<span class="line"><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> mySet </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> mySet </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">welcome</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A1A1A1">// Remove element from set</span></span>
<span class="line"><span style="color: #0059E8">set</span><span style="color: #5B5B5B"> mySet </span><span style="color: #0059E8">to</span><span style="color: #5B5B5B"> mySet </span><span style="color: #0059E8">with</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">no</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">hey</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"></span></code></pre>
<p>Sets also support common set operations like <code>union</code>, <code>intersect</code> and <code>subtract</code>.</p>
</section>
<section>
<h2 id="range-types">Range types <a class="header-anchor" href="#range-types">§</a></h2>
<p>Ranges like <code>0.0..1.0</code> can also be used as types, where they limit the range of values a variable can take:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> takePercentage</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">value </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, percentage</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">..</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> value </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> percentage</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="choice-types">Choice types <a class="header-anchor" href="#choice-types">§</a></h2>
<p>A choice type (also called a &quot;union type&quot; or just &quot;union&quot;) defines a type which may be one of several types.</p>
<p>For example:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">x</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B"> </span><span style="color: #000000">or</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span></span>
<span class="line"></span></code></pre>
<p><code>x</code> may accept either <code>integer</code> or <code>string</code> values. To read a value of this type to a receiver of type <code>integer</code> would require a conditional:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">when</span><span style="color: #5B5B5B"> x </span><span style="color: #0059E8">is</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	value</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #0059E8">otherwise</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// x is string</span></span>
<span class="line"><span style="color: #5B5B5B">	value</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> stringToInteger</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="type-aliases">Type aliases <a class="header-anchor" href="#type-aliases">§</a></h2>
<p>Type aliases allow to define an identifier that &quot;expands&quot; to a type expression:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">type</span><span style="color: #5B5B5B"> IntegerOrString</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B"> </span><span style="color: #000000">or</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">string</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="variants">Variants <a class="header-anchor" href="#variants">§</a></h2>
<p>A variant can be seen as a more powerful form of a choice type. It allows subtypes to be named, store a different type or amount of information, and define one or more custom constructors for each.</p>
<p>Variant types are defined using the <code>variant</code> keyword. In this example, <code>RGBA</code> and <code>HSLA</code> are the only direct subtypes of <code>Color</code>. All other constructors produce a type further derived from either one of them.</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">variant</span><span style="color: #5B5B5B"> Color </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// RGBA is a direct subtype of Color, since it doesn&#39;t specify a constructor:</span></span>
<span class="line"><span style="color: #5B5B5B">	RGBA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">r </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, g </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	RGBA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">hsla</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> HSLA</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> hslaToRgba</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">hsla</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Secondary constructor for RGBA</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// RGB is a derived from RGBA:</span></span>
<span class="line"><span style="color: #5B5B5B">	RGB</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">r </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, g </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #5B5B5B">, b </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">integer</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGBA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">r, g, b, </span><span style="color: #E65C00">255</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// HSLA is a direct subtype of Color, since it doesn&#39;t specify a constructor:</span></span>
<span class="line"><span style="color: #5B5B5B">	HSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">h </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, s </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, l </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, a </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	HSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">rgba</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGBA</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> rgbaToHSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">rgba</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// Secondary constructor for HSLA</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// HSL is derived from HSLA:</span></span>
<span class="line"><span style="color: #5B5B5B">	HSL</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">h </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, s </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">, l </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> HSLA</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">h, s, l, </span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #A1A1A1">// All these types derive from RGB, and thus also from RGBA:</span></span>
<span class="line"><span style="color: #5B5B5B">	Black</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	White</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	Red</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	Green</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">	Blue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> RGB</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">255</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">greenColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Green</span></span>
<span class="line"><span style="color: #5B5B5B">someCustomColor</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> HSL</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">2</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">5</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">4</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="generics">Generics <a class="header-anchor" href="#generics">§</a></h2>
<p>Generics are type placeholders that are used to define generalized data structures or methods, that can be specialized to more specific types when they are instantiated or called.</p>
<p>Lake supports TypeScript-like generics.</p>
<p>In functions:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> createPair&lt;T&gt;</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> T, y </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> T</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x, y</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
<p>In templates:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">template</span><span style="color: #5B5B5B"> genericTemplate&lt;T, U&gt;</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop1 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> T</span></span>
<span class="line"><span style="color: #5B5B5B">	prop2 </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> U</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>In mixins:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">mixin</span><span style="color: #5B5B5B"> genericMixin&lt;T, U&gt;</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">x </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> T, y </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> U</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	prop1</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> x</span></span>
<span class="line"><span style="color: #5B5B5B">	prop2</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">		val</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> [y, y]</span></span>
<span class="line"><span style="color: #5B5B5B">	</span><span style="color: #B43AFF">}</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>and similarly in formulas, action methods, variants, etc.</p>
<p>However, unlike TypeScript, Lake doesn't really allow creating general-purpose, efficient data structures, which are typically the main use-case for generics. For this reason (as well as the general goal of approachability and ease of use), the use of this feature is mainly intended towards built-in data structures - like dictionaries and sets, interoperability with TypeScript code, and various special cases where it is needed.</p>
</section>
</section>
<section>
<h1 id="imports-and-javascript-interoperation">Imports and JavaScript interoperation <a class="header-anchor" href="#imports-and-javascript-interoperation">§</a></h1>
<section>
<h2 id="importing-components">Importing components <a class="header-anchor" href="#importing-components">§</a></h2>
<p>Lake components can be imported using the <code>import</code> keyword. The reference can be a file or a URL:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">Circle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">https://example.com/lib/Circle.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">Line</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">https://example.com/lib/Line.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"><span style="color: #5B5B5B">Triangle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">https://example.com/lib/Triangle.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="importing-functions-from-javascript-modules">Importing functions from JavaScript modules <a class="header-anchor" href="#importing-functions-from-javascript-modules">§</a></h2>
<p>JavaScript functions can also be imported using <code>import</code> by dereferencing the particular exported identifier name from its module path:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">average</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">math.js</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">.average</span></span>
<span class="line"></span></code></pre>
<p>If the module doesn't supply a TypeScript type definition file (<code>.d</code>), the <code>as</code> keyword can be used to specify a static type for the identifier:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">average</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">math.js</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">.average </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">function</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">elements </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #5B5B5B">[]</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #000000">=</span><span style="color: #5B5B5B">&gt; </span><span style="color: #0059E8">decimal</span></span>
<span class="line"></span></code></pre>
<p>Without a type, the imported identifier cannot be used since Lake doesn't support dynamic typing.</p>
</section>
</section>
<section>
<h1 id="units-of-measure">Units of measure <a class="header-anchor" href="#units-of-measure">§</a></h1>
<p>In Lake, every number may be followed by an arbitrary suffix like:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #E65C00">12</span><span style="color: #5B5B5B">.5kg</span></span>
<span class="line"><span style="color: #000000">-</span><span style="color: #E65C00">4</span><span style="color: #5B5B5B">%</span></span>
<span class="line"><span style="color: #E65C00">43</span><span style="color: #5B5B5B">#</span></span>
<span class="line"></span></code></pre>
<p>These suffixes are called units, and may involve any alphabetic character or symbol except symbols used as operators like <code>+</code>, <code>-</code>, <code>*</code>, etc.</p>
<p>Fundamentally, they have no meaning. Their meaning must be stated explicitly by defining conversions:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> kg</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">g</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> g </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1000</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> pound</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">oz</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> oz </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">16</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> pound</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">g</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">453</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">59237</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> g</span></span>
<span class="line"></span></code></pre>
<p>To define the default unit conversion for a target value with no specified units, use the <code>decimal</code> unit:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">g</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> g</span></span>
<span class="line"></span></code></pre>
<p>This would also mean that when a unit isn't specified, it is taken as if it was <code>g</code> (here meaning &quot;grams&quot;).</p>
<p>Units are types and can be used as parameter types directly:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> someFunction</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">weight </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> kg, height </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> cm</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"></span></code></pre>
<section>
<h2 id="units-with-special-characters">Units with special characters <a class="header-anchor" href="#units-with-special-characters">§</a></h2>
<p>Units with special characters can be defined by enclosing them in tilde characters:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> screenWidth</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1920</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> `%`</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">px</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> px </span><span style="color: #000000">/</span><span style="color: #5B5B5B"> screenWidth</span></span>
<span class="line"></span></code></pre>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">function</span><span style="color: #5B5B5B"> someFunction</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">width </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> `%`, height </span><span style="color: #0059E8">as</span><span style="color: #5B5B5B"> px</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #5B5B5B">	....</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">something</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> someFunction</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">23</span><span style="color: #5B5B5B">%, 500px</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span></code></pre>
</section>
<section>
<h2 id="sharing-units-between-components">Sharing units between components <a class="header-anchor" href="#sharing-units-between-components">§</a></h2>
<p>Units are valid for only for the component they are declared on. To share units between components, define them in a common file like <code>Units.lake</code> and import them on each component:</p>
<p><code>Units.lake</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> kg</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">g</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> g </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">1000</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> pound</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">oz</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> oz </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">16</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> pound</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">g</span><span style="color: #B43AFF">)</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">453</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">59237</span><span style="color: #5B5B5B"> </span><span style="color: #000000">*</span><span style="color: #5B5B5B"> g</span></span>
<span class="line"></span></code></pre>
<p><code>SomeComponent.lake</code>:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">Units</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">import</span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">Units.lake</span><span style="color: #5B5B5B">&quot;</span><span style="color: #B43AFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> kg</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Units.kg</span></span>
<span class="line"><span style="color: #0059E8">unit</span><span style="color: #5B5B5B"> pound</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Units.pound</span></span>
<span class="line"></span></code></pre>
</section>
</section>
<section>
<h1 id="metadata">Metadata <a class="header-anchor" href="#metadata">§</a></h1>
<p>Every Lake variable, even ones of simple types like <code>integer</code> and <code>boolean</code>, has a special <code>meta</code> object.</p>
<p>This object may include any property name or type:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #5B5B5B">num</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #E65C00">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">num.</span><span style="color: #0059E8">meta</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	name</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">A number</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #5B5B5B">	description</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #5B5B5B">&quot;</span><span style="color: #AA6631">The best number in the world!</span><span style="color: #5B5B5B">&quot;</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>The properties of the <code>meta</code> object's members must be compile-time constants and cannot be modified at runtime.</p>
</section>
<section>
<h1 id="random-number-generation">Random number generation <a class="header-anchor" href="#random-number-generation">§</a></h1>
<p>The language is designed to be deterministic, such that when a component is given the same set of inputs, its dependent variables would always evaluate to the same values.</p>
<p>Pseudo-randomness can be achieved, however, by creating a input assigned with a special built-in <code>random(seed)</code> constructor:</p>
<pre class="shiki Rotem's Light Theme" style="background-color: #FCFCFC" tabindex="0"><code><span class="line"><span style="color: #0059E8">input</span><span style="color: #5B5B5B"> randomState</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #0059E8">random</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">7</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// The initial state is set to 7</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">someRandomizedValue</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> randomState.</span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">()</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// range defaults to 0.0 to 1.0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5B5B5B">randomCircle</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> Circle </span><span style="color: #B43AFF">{</span></span>
<span class="line"><span style="color: #5B5B5B">	radius</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> randomState.</span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">10</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B"> </span><span style="color: #A1A1A1">// min defaults to 0.0</span></span>
<span class="line"><span style="color: #5B5B5B">	center</span><span style="color: #000000">:</span><span style="color: #5B5B5B"> </span><span style="color: #B43AFF">(</span><span style="color: #5B5B5B">randomState.</span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">)</span><span style="color: #5B5B5B">, randomState.</span><span style="color: #0059E8">decimal</span><span style="color: #B43AFF">(</span><span style="color: #E65C00">1</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #5B5B5B">, </span><span style="color: #E65C00">3</span><span style="color: #5B5B5B">.</span><span style="color: #E65C00">0</span><span style="color: #B43AFF">))</span></span>
<span class="line"><span style="color: #B43AFF">}</span></span>
<span class="line"></span></code></pre>
<p>The <code>random()</code> constructor is not a typical stateful PRNG, it is special language construct that produces a PRNG that:</p>
<ul>
<li>Has an underlying state that is safely and transparently incremented whenever a new pseudo-random value is generated, even if multiple generations are made in the same iteration of the event loop.</li>
<li>Is not sensitive to the order in which expressions are evaluated.</li>
<li>Understands sequence generation and will advance the generator's internal state at each iteration, if needed.</li>
<li>Can be serialized along with the rest of the component in such a way that the restored component will continue from the same pseudo-random state.</li>
</ul>
<p>In this way, it is ensured that given the same seed, randomly generated values are consistent across different executions.</p>
<p>The <code>randomState</code> object has several methods:</p>
<ul>
<li><code>randomState.decimal(min?, max)</code></li>
<li><code>randomState.integer(min?, max)</code></li>
<li><code>randomState.string(length, characterSet)</code></li>
<li><code>randomState.boolean()</code></li>
<li><code>randomState.binary(byteCount)</code></li>
</ul>
<p><em>Note that these methods are highly insecure! They should never be used to generate passwords, keys, or other sensitive information!</em></p>
</section>
<section>
<h1 id="regular-expressions">Regular expressions <a class="header-anchor" href="#regular-expressions">§</a></h1>
<p>Regular expressions are special expressions used to match patterns in strings.</p>
</section>
<section>
<h1 id="closing-chapter">Closing chapter <a class="header-anchor" href="#closing-chapter">§</a></h1>
<section>
<h2 id="open-design-topics">Open design topics <a class="header-anchor" href="#open-design-topics">§</a></h2>
<ul>
<li>Bundled components: multiple components bundled to one file where the embedded files are have virtual file paths.</li>
</ul>
</section>
<section>
<h2 id="todo">TODO <a class="header-anchor" href="#todo">§</a></h2>
<ul>
<li>Slices</li>
<li>Binary literals</li>
<li>Time and Date type</li>
<li>Multiline strings</li>
<li><code>invariants</code> region</li>
</ul>
</section>
<section>
<h2 id="issues">Issues <a class="header-anchor" href="#issues">§</a></h2>
</section>
<section>
<h2 id="influences">Influences <a class="header-anchor" href="#influences">§</a></h2>
<ul>
<li><strong>JSON</strong>: syntax, object model</li>
<li><strong>JavaScript</strong>: some syntax</li>
<li><strong>TypeScript</strong>: type syntax</li>
<li><strong>Python</strong>, <strong>Visual Basic</strong>: some syntax</li>
<li><strong>SASS</strong>: mixins</li>
</ul>
</section>
<section>
<h2 id="feedback-for-this-document">Feedback for this document <a class="header-anchor" href="#feedback-for-this-document">§</a></h2>
<p>The repository is located at <a href="https://github.com/island-lang/island-lang.github.io">github.com/island-lang/island-lang.github.io</a></p>
<p>Feel free to ask questions, report errors or make constructive suggestions.</p>
</section>
<section>
<h2 id="copyrights">Copyrights <a class="header-anchor" href="#copyrights">§</a></h2>
<p>Copyright © Rotem Dan<br />
2022 - 2025</p>
</section>
</section>

</main>

<footer>
	<p id="last-modified">
		<i>Last edited: March 30, 2025</i>
	</p>
</footer>
</body>
</html>
